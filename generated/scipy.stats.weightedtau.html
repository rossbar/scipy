<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>scipy.stats.weightedtau &mdash; SciPy v1.5.0.dev0+47ffc1e Reference Guide</title>
    
    <link rel="stylesheet" type="text/css" href="../_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/spc-extend.css">
    <link rel="stylesheet" href="../_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.5.0.dev0+47ffc1e',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/scipy-mathjax/MathJax.js?config=scipy-mathjax"></script>
    <script type="text/javascript" src="../_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" >
    <link rel="search" title="Search" href="../search.html" >
    <link rel="top" title="SciPy v1.5.0.dev0+47ffc1e Reference Guide" href="../index.html" >
    <link rel="up" title="Statistical functions (scipy.stats)" href="../stats.html" >
    <link rel="next" title="scipy.stats.linregress" href="scipy.stats.linregress.html" >
    <link rel="prev" title="scipy.stats.kendalltau" href="scipy.stats.kendalltau.html" > 
  </head>
  <body>

<div class="container">
  <div class="top-scipy-org-logo-header">
    <a href="../index.html">
      <img style="border: 0;" alt="SciPy" src="../_static/img/scipy_org_logo.png"></a>
    </div>
  </div>
</div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
        <li class="active"><a href="https://scipy.org/">SciPy.org</a></li>
        <li class="active"><a href="https://docs.scipy.org/">Docs</a></li>
	
        <li class="active"><a href="../index.html">SciPy v1.5.0.dev0+47ffc1e Reference Guide</a></li>
	
          <li class="active"><a href="../stats.html" accesskey="U">Statistical functions (<code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy.stats</span></code>)</a></li> 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="../genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="../py-modindex.html" title="Python Module Index"
           >modules</a>
      </li>
      <li class="active">
        <a href="scipy.stats.linregress.html" title="scipy.stats.linregress"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="scipy.stats.kendalltau.html" title="scipy.stats.kendalltau"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="scipy-stats-weightedtau">
<h1>scipy.stats.weightedtau<a class="headerlink" href="#scipy-stats-weightedtau" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="scipy.stats.weightedtau">
<code class="sig-prename descclassname">scipy.stats.</code><code class="sig-name descname">weightedtau</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y</em>, <em class="sig-param">rank=True</em>, <em class="sig-param">weigher=None</em>, <em class="sig-param">additive=True</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/scipy/scipy/blob/47ffc1e/scipy/stats/stats.py#L4175-L4347"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scipy.stats.weightedtau" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a weighted version of Kendall’s <span class="math notranslate nohighlight">\(\tau\)</span>.</p>
<p>The weighted <span class="math notranslate nohighlight">\(\tau\)</span> is a weighted version of Kendall’s
<span class="math notranslate nohighlight">\(\tau\)</span> in which exchanges of high weight are more influential than
exchanges of low weight. The default parameters compute the additive
hyperbolic version of the index, <span class="math notranslate nohighlight">\(\tau_\mathrm h\)</span>, which has
been shown to provide the best balance between important and
unimportant elements <a class="reference internal" href="#r9c7695fdc6ad-1" id="id1">[1]</a>.</p>
<p>The weighting is defined by means of a rank array, which assigns a
nonnegative rank to each element, and a weigher function, which
assigns a weight based from the rank to each element. The weight of an
exchange is then the sum or the product of the weights of the ranks of
the exchanged elements. The default parameters compute
<span class="math notranslate nohighlight">\(\tau_\mathrm h\)</span>: an exchange between elements with rank
<span class="math notranslate nohighlight">\(r\)</span> and <span class="math notranslate nohighlight">\(s\)</span> (starting from zero) has weight
<span class="math notranslate nohighlight">\(1/(r+1) + 1/(s+1)\)</span>.</p>
<p>Specifying a rank array is meaningful only if you have in mind an
external criterion of importance. If, as it usually happens, you do
not have in mind a specific rank, the weighted <span class="math notranslate nohighlight">\(\tau\)</span> is
defined by averaging the values obtained using the decreasing
lexicographical rank by (<em class="xref py py-obj">x</em>, <em class="xref py py-obj">y</em>) and by (<em class="xref py py-obj">y</em>, <em class="xref py py-obj">x</em>). This is the
behavior with default parameters.</p>
<p>Note that if you are computing the weighted <span class="math notranslate nohighlight">\(\tau\)</span> on arrays of
ranks, rather than of scores (i.e., a larger value implies a lower
rank) you must negate the ranks, so that elements of higher rank are
associated with a larger value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>x, y</strong><span class="classifier">array_like</span></dt><dd><p>Arrays of scores, of the same shape. If arrays are not 1-D, they will
be flattened to 1-D.</p>
</dd>
<dt><strong>rank</strong><span class="classifier">array_like of ints or bool, optional</span></dt><dd><p>A nonnegative rank assigned to each element. If it is None, the
decreasing lexicographical rank by (<em class="xref py py-obj">x</em>, <em class="xref py py-obj">y</em>) will be used: elements of
higher rank will be those with larger <em class="xref py py-obj">x</em>-values, using <em class="xref py py-obj">y</em>-values to
break ties (in particular, swapping <em class="xref py py-obj">x</em> and <em class="xref py py-obj">y</em> will give a different
result). If it is False, the element indices will be used
directly as ranks. The default is True, in which case this
function returns the average of the values obtained using the
decreasing lexicographical rank by (<em class="xref py py-obj">x</em>, <em class="xref py py-obj">y</em>) and by (<em class="xref py py-obj">y</em>, <em class="xref py py-obj">x</em>).</p>
</dd>
<dt><strong>weigher</strong><span class="classifier">callable, optional</span></dt><dd><p>The weigher function. Must map nonnegative integers (zero
representing the most important element) to a nonnegative weight.
The default, None, provides hyperbolic weighing, that is,
rank <span class="math notranslate nohighlight">\(r\)</span> is mapped to weight <span class="math notranslate nohighlight">\(1/(r+1)\)</span>.</p>
</dd>
<dt><strong>additive</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, the weight of an exchange is computed by adding the
weights of the ranks of the exchanged elements; otherwise, the weights
are multiplied. The default is True.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>correlation</strong><span class="classifier">float</span></dt><dd><p>The weighted <span class="math notranslate nohighlight">\(\tau\)</span> correlation index.</p>
</dd>
<dt><strong>pvalue</strong><span class="classifier">float</span></dt><dd><p>Presently <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>, as the null statistics is unknown (even in the
additive hyperbolic case).</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="scipy.stats.kendalltau.html#scipy.stats.kendalltau" title="scipy.stats.kendalltau"><code class="xref py py-obj docutils literal notranslate"><span class="pre">kendalltau</span></code></a></dt><dd><p>Calculates Kendall’s tau.</p>
</dd>
<dt><a class="reference internal" href="scipy.stats.spearmanr.html#scipy.stats.spearmanr" title="scipy.stats.spearmanr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spearmanr</span></code></a></dt><dd><p>Calculates a Spearman rank-order correlation coefficient.</p>
</dd>
<dt><a class="reference internal" href="scipy.stats.theilslopes.html#scipy.stats.theilslopes" title="scipy.stats.theilslopes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">theilslopes</span></code></a></dt><dd><p>Computes the Theil-Sen estimator for a set of points (x, y).</p>
</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>This function uses an <span class="math notranslate nohighlight">\(O(n \log n)\)</span>, mergesort-based algorithm
<a class="reference internal" href="#r9c7695fdc6ad-1" id="id2">[1]</a> that is a weighted extension of Knight’s algorithm for Kendall’s
<span class="math notranslate nohighlight">\(\tau\)</span> <a class="reference internal" href="#r9c7695fdc6ad-2" id="id3">[2]</a>. It can compute Shieh’s weighted <span class="math notranslate nohighlight">\(\tau\)</span> <a class="reference internal" href="#r9c7695fdc6ad-3" id="id4">[3]</a>
between rankings without ties (i.e., permutations) by setting
<em class="xref py py-obj">additive</em> and <em class="xref py py-obj">rank</em> to False, as the definition given in <a class="reference internal" href="#r9c7695fdc6ad-1" id="id5">[1]</a> is a
generalization of Shieh’s.</p>
<p>NaNs are considered the smallest possible score.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.19.0.</span></p>
</div>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="r9c7695fdc6ad-1"><span class="brackets">1</span><span class="fn-backref">(<a href="#id1">1</a>,<a href="#id2">2</a>,<a href="#id5">3</a>)</span></dt>
<dd><p>Sebastiano Vigna, “A weighted correlation index for rankings with
ties”, Proceedings of the 24th international conference on World
Wide Web, pp. 1166-1176, ACM, 2015.</p>
</dd>
<dt class="label" id="r9c7695fdc6ad-2"><span class="brackets"><a class="fn-backref" href="#id3">2</a></span></dt>
<dd><p>W.R. Knight, “A Computer Method for Calculating Kendall’s Tau with
Ungrouped Data”, Journal of the American Statistical Association,
Vol. 61, No. 314, Part 1, pp. 436-439, 1966.</p>
</dd>
<dt class="label" id="r9c7695fdc6ad-3"><span class="brackets"><a class="fn-backref" href="#id4">3</a></span></dt>
<dd><p>Grace S. Shieh. “A weighted Kendall’s tau statistic”, Statistics &amp;
Probability Letters, Vol. 39, No. 1, pp. 17-24, 1998.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">weightedtau</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span>
<span class="go">-0.56694968153682723</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p_value</span>
<span class="go">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">weightedtau</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">additive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span>
<span class="go">-0.62205716951801038</span>
</pre></div>
</div>
<p>NaNs are considered the smallest possible score:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">weightedtau</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span>
<span class="go">-0.56694968153682723</span>
</pre></div>
</div>
<p>This is exactly Kendall’s tau:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">weightedtau</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">weigher</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span>
<span class="go">-0.47140452079103173</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">weightedtau</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">WeightedTauResult(correlation=-0.4157652301037516, pvalue=nan)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">weightedtau</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">WeightedTauResult(correlation=-0.7181341329699028, pvalue=nan)</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
          </div>
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="scipy.stats.kendalltau.html"
                        title="previous chapter">scipy.stats.kendalltau</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="scipy.stats.linregress.html"
                        title="next chapter">scipy.stats.linregress</a></p>
<div id="searchbox" style="display: none" role="search">
  <h4>Quick search</h4>
    <div>
    <form class="search" action="../search.html" method="get">
      <input type="text" style="width: inherit;" name="q" />
      <input type="submit" value="search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2008-2019, The SciPy community.
      </li>
      <li>
      Last updated on Dec 16, 2019.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 2.3.0.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>